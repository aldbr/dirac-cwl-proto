{
  "$defs": {
    "Admin": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Administrative metadata with enhanced logging",
      "dirac_metadata_class": "Admin",
      "dirac_vo": null,
      "properties": {
        "admin_level": {
          "default": 1,
          "title": "Admin Level",
          "type": "integer"
        },
        "enable_monitoring": {
          "default": true,
          "title": "Enable Monitoring",
          "type": "boolean"
        },
        "log_level": {
          "default": "INFO",
          "title": "Log Level",
          "type": "string"
        }
      },
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "BaseMetadataModel": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Base metadata model",
      "dirac_metadata_class": "BaseMetadataModel",
      "dirac_vo": null,
      "properties": {},
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "DataGeneration": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Data generation for Gaussian fitting workflows",
      "dirac_metadata_class": "DataGeneration",
      "dirac_vo": null,
      "properties": {
        "output_file_name_1": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Output File Name 1"
        },
        "output_file_name_2": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Output File Name 2"
        }
      },
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "ExecutionHooksHint": {
      "additionalProperties": true,
      "description": "Data management configuration for DIRAC jobs",
      "properties": {
        "hook_plugin": {
          "default": "User",
          "description": "Registry key for the metadata implementation class",
          "title": "Metadata Class",
          "type": "string"
        },
        "configuration": {
          "description": "Additional parameters for metadata plugins",
          "title": "Query Params",
          "type": "object"
        },
        "version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Metadata model version",
          "title": "Version"
        },
        "vo": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Virtual Organization namespace (e.g., 'lhcb', 'ctao')",
          "title": "Vo"
        }
      },
      "title": "DIRAC Data Manager",
      "type": "object"
    },
    "GaussianFit": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Gaussian fitting analysis on data sets",
      "dirac_metadata_class": "GaussianFit",
      "dirac_vo": null,
      "properties": {
        "data1": {
          "anyOf": [
            {
              "items": {},
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Data1"
        },
        "data2": {
          "anyOf": [
            {
              "items": {},
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Data2"
        }
      },
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "JobExecutor": {
      "additionalProperties": false,
      "description": "Descriptor for job execution configuration.",
      "properties": {
        "platform": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Target platform (e.g., 'DIRAC', 'DIRACX')",
          "title": "Platform"
        },
        "priority": {
          "default": 10,
          "description": "Job priority (higher values = higher priority)",
          "title": "Priority",
          "type": "integer"
        },
        "sites": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Candidate execution sites",
          "title": "Sites"
        }
      },
      "title": "JobExecutor",
      "type": "object"
    },
    "JobParameterModel": {
      "description": "Parameter of a job.",
      "properties": {
        "cwl": {
          "title": "Cwl",
          "type": "object"
        },
        "sandbox": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "title": "Sandbox"
        }
      },
      "required": [
        "sandbox",
        "cwl"
      ],
      "title": "JobParameterModel",
      "type": "object"
    },
    "JobSubmissionModel": {
      "$defs": {
        "ExecutionHooksHint": {
          "additionalProperties": true,
          "description": "Data management configuration for DIRAC jobs",
          "properties": {
            "hook_plugin": {
              "default": "User",
              "description": "Registry key for the metadata implementation class",
              "title": "Metadata Class",
              "type": "string"
            },
            "configuration": {
              "description": "Additional parameters for metadata plugins",
              "title": "Query Params",
              "type": "object"
            },
            "version": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Metadata model version",
              "title": "Version"
            },
            "vo": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Virtual Organization namespace (e.g., 'lhcb', 'ctao')",
              "title": "Vo"
            }
          },
          "title": "DIRAC Data Manager",
          "type": "object"
        },
        "JobParameterModel": {
          "description": "Parameter of a job.",
          "properties": {
            "cwl": {
              "title": "Cwl",
              "type": "object"
            },
            "sandbox": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Sandbox"
            }
          },
          "required": [
            "sandbox",
            "cwl"
          ],
          "title": "JobParameterModel",
          "type": "object"
        },
        "TaskDescriptionModel": {
          "additionalProperties": false,
          "description": "Description of a task (job/transformation/production step).\n\nThis class extends the core JobExecutor with additional methods\nfor CWL integration and backward compatibility.\n\nParameters\n----------\nplatform : str | None\n    Target platform name (for example ``\"DIRAC\"``). If ``None``, no\n    platform preference is encoded.\npriority : int, optional\n    Scheduling priority. Higher values indicate higher priority.\n    Defaults to ``10``.\nsites : list[str] | None\n    Optional list of candidate site names where the task may run.\n\nNotes\n-----\nThis is a serialisable Pydantic descriptor intended to carry CWL hints\nrelated to runtime placement and scheduling. Prefer using the class\nfactory ``TaskDescriptionModel.from_hints(cwl)`` when extracting hints\nfrom parsed CWL objects.",
          "properties": {
            "platform": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Target platform (e.g., 'DIRAC', 'DIRACX')",
              "title": "Platform"
            },
            "priority": {
              "default": 10,
              "description": "Job priority (higher values = higher priority)",
              "title": "Priority",
              "type": "integer"
            },
            "sites": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Candidate execution sites",
              "title": "Sites"
            }
          },
          "title": "TaskDescriptionModel",
          "type": "object"
        }
      },
      "description": "Job definition sent to the router.",
      "properties": {
        "description": {
          "$ref": "#/$defs/TaskDescriptionModel"
        },
        "metadata": {
          "$ref": "#/$defs/ExecutionHooksHint"
        },
        "parameters": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/JobParameterModel"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Parameters"
        },
        "task": {
          "anyOf": [],
          "title": "Task"
        }
      },
      "required": [
        "task",
        "description",
        "metadata"
      ],
      "title": "JobSubmissionModel",
      "type": "object"
    },
    "LHCb": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Base metadata model",
      "dirac_metadata_class": "LHCb",
      "dirac_vo": "lhcb",
      "properties": {
        "run_id": {
          "description": "LHCb run identifier",
          "title": "Run Id",
          "type": "integer"
        },
        "task_id": {
          "description": "LHCb task identifier",
          "title": "Task Id",
          "type": "integer"
        }
      },
      "required": [
        "task_id",
        "run_id"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "LHCbAnalysis": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "LHCb analysis metadata for user analysis jobs",
      "dirac_metadata_class": "LHCbAnalysis",
      "dirac_vo": "lhcb",
      "properties": {
        "analysis_name": {
          "description": "Name of the analysis",
          "title": "Analysis Name",
          "type": "string"
        },
        "analysis_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Analysis version",
          "title": "Analysis Version"
        },
        "input_datasets": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of input dataset identifiers",
          "title": "Input Datasets"
        },
        "run_id": {
          "description": "LHCb run identifier",
          "title": "Run Id",
          "type": "integer"
        },
        "selection_criteria": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Event selection criteria",
          "title": "Selection Criteria"
        },
        "task_id": {
          "description": "LHCb task identifier",
          "title": "Task Id",
          "type": "integer"
        },
        "user_name": {
          "description": "Analysis owner",
          "title": "User Name",
          "type": "string"
        }
      },
      "required": [
        "task_id",
        "run_id",
        "analysis_name",
        "user_name"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "LHCbReconstruction": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "LHCb reconstruction metadata with file management",
      "dirac_metadata_class": "LHCbReconstruction",
      "dirac_vo": "lhcb",
      "properties": {
        "input_data_type": {
          "default": "RAW",
          "description": "Type of input data (RAW, DST, etc.)",
          "title": "Input Data Type",
          "type": "string"
        },
        "output_data_type": {
          "default": "DST",
          "description": "Type of output data",
          "title": "Output Data Type",
          "type": "string"
        },
        "reconstruction_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Reconstruction software version",
          "title": "Reconstruction Version"
        },
        "run_id": {
          "description": "LHCb run identifier",
          "title": "Run Id",
          "type": "integer"
        },
        "task_id": {
          "description": "LHCb task identifier",
          "title": "Task Id",
          "type": "integer"
        }
      },
      "required": [
        "task_id",
        "run_id"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "LHCbSimulation": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "LHCb simulation metadata with dynamic resource allocation",
      "dirac_metadata_class": "LHCbSimulation",
      "dirac_vo": "lhcb",
      "properties": {
        "beam_energy": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Beam energy in GeV",
          "title": "Beam Energy"
        },
        "detector_conditions": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Detector conditions tag",
          "title": "Detector Conditions"
        },
        "generator_config": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Generator configuration",
          "title": "Generator Config"
        },
        "number_of_events": {
          "default": 0,
          "description": "Number of events to simulate",
          "title": "Number Of Events",
          "type": "integer"
        },
        "run_id": {
          "description": "LHCb run identifier",
          "title": "Run Id",
          "type": "integer"
        },
        "task_id": {
          "description": "LHCb task identifier",
          "title": "Task Id",
          "type": "integer"
        }
      },
      "required": [
        "task_id",
        "run_id"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "MandelBrotGeneration": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Mandelbrot set generation with configurable parameters",
      "dirac_metadata_class": "MandelBrotGeneration",
      "dirac_vo": null,
      "properties": {
        "height": {
          "title": "Height",
          "type": "integer"
        },
        "max_iterations": {
          "title": "Max Iterations",
          "type": "integer"
        },
        "output_name": {
          "title": "Output Name",
          "type": "string"
        },
        "precision": {
          "title": "Precision",
          "type": "number"
        },
        "split": {
          "title": "Split",
          "type": "integer"
        },
        "start_x": {
          "title": "Start X",
          "type": "number"
        },
        "start_y": {
          "title": "Start Y",
          "type": "number"
        },
        "step": {
          "title": "Step",
          "type": "integer"
        },
        "width": {
          "title": "Width",
          "type": "integer"
        }
      },
      "required": [
        "precision",
        "max_iterations",
        "start_x",
        "start_y",
        "step",
        "split",
        "width",
        "height",
        "output_name"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "MandelBrotMerging": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Mandelbrot image merging and composite generation",
      "dirac_metadata_class": "MandelBrotMerging",
      "dirac_vo": null,
      "properties": {
        "data": {
          "anyOf": [
            {
              "items": {},
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Data"
        },
        "height": {
          "title": "Height",
          "type": "integer"
        },
        "max_iterations": {
          "title": "Max Iterations",
          "type": "integer"
        },
        "output_name": {
          "title": "Output Name",
          "type": "string"
        },
        "precision": {
          "title": "Precision",
          "type": "number"
        },
        "split": {
          "title": "Split",
          "type": "integer"
        },
        "start_x": {
          "title": "Start X",
          "type": "number"
        },
        "start_y": {
          "title": "Start Y",
          "type": "number"
        },
        "step": {
          "title": "Step",
          "type": "integer"
        },
        "width": {
          "title": "Width",
          "type": "integer"
        }
      },
      "required": [
        "precision",
        "max_iterations",
        "start_x",
        "start_y",
        "step",
        "split",
        "width",
        "height",
        "output_name"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "PiGather": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "PI result gathering and aggregation metadata",
      "dirac_metadata_class": "PiGather",
      "dirac_vo": null,
      "properties": {
        "input_data": {
          "anyOf": [
            {
              "items": {},
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Input Data"
        },
        "num_points": {
          "title": "Num Points",
          "type": "integer"
        }
      },
      "required": [
        "num_points"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "PiSimulate": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "PI simulation metadata with point-based output management",
      "dirac_metadata_class": "PiSimulate",
      "dirac_vo": null,
      "properties": {
        "num_points": {
          "title": "Num Points",
          "type": "integer"
        }
      },
      "required": [
        "num_points"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "PiSimulateV2": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Enhanced PI simulation metadata with custom output paths",
      "dirac_metadata_class": "PiSimulateV2",
      "dirac_vo": null,
      "properties": {
        "num_points": {
          "title": "Num Points",
          "type": "integer"
        },
        "output_path": {
          "title": "Output Path",
          "type": "string"
        }
      },
      "required": [
        "num_points",
        "output_path"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "ProductionStepMetadataModel": {
      "$defs": {
        "TaskDescriptionModel": {
          "additionalProperties": false,
          "description": "Description of a task (job/transformation/production step).\n\nThis class extends the core JobExecutor with additional methods\nfor CWL integration and backward compatibility.\n\nParameters\n----------\nplatform : str | None\n    Target platform name (for example ``\"DIRAC\"``). If ``None``, no\n    platform preference is encoded.\npriority : int, optional\n    Scheduling priority. Higher values indicate higher priority.\n    Defaults to ``10``.\nsites : list[str] | None\n    Optional list of candidate site names where the task may run.\n\nNotes\n-----\nThis is a serialisable Pydantic descriptor intended to carry CWL hints\nrelated to runtime placement and scheduling. Prefer using the class\nfactory ``TaskDescriptionModel.from_hints(cwl)`` when extracting hints\nfrom parsed CWL objects.",
          "properties": {
            "platform": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Target platform (e.g., 'DIRAC', 'DIRACX')",
              "title": "Platform"
            },
            "priority": {
              "default": 10,
              "description": "Job priority (higher values = higher priority)",
              "title": "Priority",
              "type": "integer"
            },
            "sites": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Candidate execution sites",
              "title": "Sites"
            }
          },
          "title": "TaskDescriptionModel",
          "type": "object"
        },
        "TransformationMetadataModel": {
          "additionalProperties": true,
          "description": "Data management configuration for DIRAC jobs",
          "properties": {
            "group_size": {
              "anyOf": [
                {
                  "additionalProperties": {
                    "type": "integer"
                  },
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Group Size"
            },
            "hook_plugin": {
              "default": "User",
              "description": "Registry key for the metadata implementation class",
              "title": "Metadata Class",
              "type": "string"
            },
            "configuration": {
              "description": "Additional parameters for metadata plugins",
              "title": "Query Params",
              "type": "object"
            },
            "version": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Metadata model version",
              "title": "Version"
            },
            "vo": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Virtual Organization namespace (e.g., 'lhcb', 'ctao')",
              "title": "Vo"
            }
          },
          "title": "DIRAC Data Manager",
          "type": "object"
        }
      },
      "description": "Step metadata for a transformation.",
      "properties": {
        "description": {
          "$ref": "#/$defs/TaskDescriptionModel"
        },
        "metadata": {
          "$ref": "#/$defs/TransformationMetadataModel"
        }
      },
      "required": [
        "description",
        "metadata"
      ],
      "title": "ProductionStepMetadataModel",
      "type": "object"
    },
    "ProductionSubmissionModel": {
      "additionalProperties": false,
      "description": "Schema for ProductionSubmissionModel with CWL type references",
      "properties": {
        "steps_metadata": {
          "additionalProperties": {
            "$ref": "#/$defs/ProductionStepMetadataModel"
          },
          "description": "Dictionary mapping strings to ProductionStepMetadataModel",
          "type": "object"
        },
        "task": {
          "$ref": "https://json.schemastore.org/cwl-workflow.json",
          "description": "CWL Workflow definition"
        }
      },
      "required": [
        "task",
        "steps_metadata"
      ],
      "title": "ProductionSubmissionModel",
      "type": "object"
    },
    "QueryBased": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Metadata with query-based input resolution",
      "dirac_metadata_class": "QueryBased",
      "dirac_vo": null,
      "properties": {
        "campaign": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Campaign"
        },
        "data_type": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Data Type"
        },
        "query_root": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Query Root"
        },
        "site": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Site"
        }
      },
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "TaskDescriptionModel": {
      "additionalProperties": false,
      "description": "Description of a task (job/transformation/production step).\n\nThis class extends the core JobExecutor with additional methods\nfor CWL integration and backward compatibility.\n\nParameters\n----------\nplatform : str | None\n    Target platform name (for example ``\"DIRAC\"``). If ``None``, no\n    platform preference is encoded.\npriority : int, optional\n    Scheduling priority. Higher values indicate higher priority.\n    Defaults to ``10``.\nsites : list[str] | None\n    Optional list of candidate site names where the task may run.\n\nNotes\n-----\nThis is a serialisable Pydantic descriptor intended to carry CWL hints\nrelated to runtime placement and scheduling. Prefer using the class\nfactory ``TaskDescriptionModel.from_hints(cwl)`` when extracting hints\nfrom parsed CWL objects.",
      "properties": {
        "platform": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Target platform (e.g., 'DIRAC', 'DIRACX')",
          "title": "Platform"
        },
        "priority": {
          "default": 10,
          "description": "Job priority (higher values = higher priority)",
          "title": "Priority",
          "type": "integer"
        },
        "sites": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Candidate execution sites",
          "title": "Sites"
        }
      },
      "title": "TaskDescriptionModel",
      "type": "object"
    },
    "TaskWithMetadataQueryPlugin": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Example metadata plugin with query-based input resolution",
      "dirac_metadata_class": "TaskWithMetadataQueryPlugin",
      "dirac_vo": null,
      "properties": {},
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "TransformationExecutionHooksHint": {
      "additionalProperties": true,
      "description": "Data management configuration for DIRAC jobs",
      "properties": {
        "group_size": {
          "anyOf": [
            {
              "additionalProperties": {
                "type": "integer"
              },
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Input grouping configuration for transformation jobs",
          "title": "Group Size"
        },
        "hook_plugin": {
          "default": "User",
          "description": "Registry key for the metadata implementation class",
          "title": "Metadata Class",
          "type": "string"
        },
        "configuration": {
          "description": "Additional parameters for metadata plugins",
          "title": "Query Params",
          "type": "object"
        },
        "version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Metadata model version",
          "title": "Version"
        },
        "vo": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Virtual Organization namespace (e.g., 'lhcb', 'ctao')",
          "title": "Vo"
        }
      },
      "title": "DIRAC Data Manager",
      "type": "object"
    },
    "TransformationSubmissionModel": {
      "$defs": {
        "TaskDescriptionModel": {
          "additionalProperties": false,
          "description": "Description of a task (job/transformation/production step).\n\nThis class extends the core JobExecutor with additional methods\nfor CWL integration and backward compatibility.\n\nParameters\n----------\nplatform : str | None\n    Target platform name (for example ``\"DIRAC\"``). If ``None``, no\n    platform preference is encoded.\npriority : int, optional\n    Scheduling priority. Higher values indicate higher priority.\n    Defaults to ``10``.\nsites : list[str] | None\n    Optional list of candidate site names where the task may run.\n\nNotes\n-----\nThis is a serialisable Pydantic descriptor intended to carry CWL hints\nrelated to runtime placement and scheduling. Prefer using the class\nfactory ``TaskDescriptionModel.from_hints(cwl)`` when extracting hints\nfrom parsed CWL objects.",
          "properties": {
            "platform": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Target platform (e.g., 'DIRAC', 'DIRACX')",
              "title": "Platform"
            },
            "priority": {
              "default": 10,
              "description": "Job priority (higher values = higher priority)",
              "title": "Priority",
              "type": "integer"
            },
            "sites": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Candidate execution sites",
              "title": "Sites"
            }
          },
          "title": "TaskDescriptionModel",
          "type": "object"
        },
        "TransformationMetadataModel": {
          "additionalProperties": true,
          "description": "Data management configuration for DIRAC jobs",
          "properties": {
            "group_size": {
              "anyOf": [
                {
                  "additionalProperties": {
                    "type": "integer"
                  },
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Group Size"
            },
            "hook_plugin": {
              "default": "User",
              "description": "Registry key for the metadata implementation class",
              "title": "Metadata Class",
              "type": "string"
            },
            "configuration": {
              "description": "Additional parameters for metadata plugins",
              "title": "Query Params",
              "type": "object"
            },
            "version": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Metadata model version",
              "title": "Version"
            },
            "vo": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Virtual Organization namespace (e.g., 'lhcb', 'ctao')",
              "title": "Vo"
            }
          },
          "title": "DIRAC Data Manager",
          "type": "object"
        }
      },
      "description": "Transformation definition sent to the router.",
      "properties": {
        "description": {
          "$ref": "#/$defs/TaskDescriptionModel"
        },
        "metadata": {
          "$ref": "#/$defs/TransformationMetadataModel"
        },
        "task": {
          "anyOf": [],
          "title": "Task"
        }
      },
      "required": [
        "task",
        "metadata",
        "description"
      ],
      "title": "TransformationSubmissionModel",
      "type": "object"
    },
    "User": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Basic user metadata with no special processing",
      "dirac_metadata_class": "User",
      "dirac_vo": null,
      "properties": {},
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "lhcb_LHCb": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "Base metadata model",
      "dirac_metadata_class": "LHCb",
      "dirac_vo": "lhcb",
      "properties": {
        "run_id": {
          "description": "LHCb run identifier",
          "title": "Run Id",
          "type": "integer"
        },
        "task_id": {
          "description": "LHCb task identifier",
          "title": "Task Id",
          "type": "integer"
        }
      },
      "required": [
        "task_id",
        "run_id"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "lhcb_LHCbAnalysis": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "LHCb analysis metadata for user analysis jobs",
      "dirac_metadata_class": "LHCbAnalysis",
      "dirac_vo": "lhcb",
      "properties": {
        "analysis_name": {
          "description": "Name of the analysis",
          "title": "Analysis Name",
          "type": "string"
        },
        "analysis_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Analysis version",
          "title": "Analysis Version"
        },
        "input_datasets": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of input dataset identifiers",
          "title": "Input Datasets"
        },
        "run_id": {
          "description": "LHCb run identifier",
          "title": "Run Id",
          "type": "integer"
        },
        "selection_criteria": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Event selection criteria",
          "title": "Selection Criteria"
        },
        "task_id": {
          "description": "LHCb task identifier",
          "title": "Task Id",
          "type": "integer"
        },
        "user_name": {
          "description": "Analysis owner",
          "title": "User Name",
          "type": "string"
        }
      },
      "required": [
        "task_id",
        "run_id",
        "analysis_name",
        "user_name"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "lhcb_LHCbReconstruction": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "LHCb reconstruction metadata with file management",
      "dirac_metadata_class": "LHCbReconstruction",
      "dirac_vo": "lhcb",
      "properties": {
        "input_data_type": {
          "default": "RAW",
          "description": "Type of input data (RAW, DST, etc.)",
          "title": "Input Data Type",
          "type": "string"
        },
        "output_data_type": {
          "default": "DST",
          "description": "Type of output data",
          "title": "Output Data Type",
          "type": "string"
        },
        "reconstruction_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Reconstruction software version",
          "title": "Reconstruction Version"
        },
        "run_id": {
          "description": "LHCb run identifier",
          "title": "Run Id",
          "type": "integer"
        },
        "task_id": {
          "description": "LHCb task identifier",
          "title": "Task Id",
          "type": "integer"
        }
      },
      "required": [
        "task_id",
        "run_id"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    },
    "lhcb_LHCbSimulation": {
      "description": "Base metadata model for DIRAC jobs",
      "dirac_description": "LHCb simulation metadata with dynamic resource allocation",
      "dirac_metadata_class": "LHCbSimulation",
      "dirac_vo": "lhcb",
      "properties": {
        "beam_energy": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Beam energy in GeV",
          "title": "Beam Energy"
        },
        "detector_conditions": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Detector conditions tag",
          "title": "Detector Conditions"
        },
        "generator_config": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Generator configuration",
          "title": "Generator Config"
        },
        "number_of_events": {
          "default": 0,
          "description": "Number of events to simulate",
          "title": "Number Of Events",
          "type": "integer"
        },
        "run_id": {
          "description": "LHCb run identifier",
          "title": "Run Id",
          "type": "integer"
        },
        "task_id": {
          "description": "LHCb task identifier",
          "title": "Task Id",
          "type": "integer"
        }
      },
      "required": [
        "task_id",
        "run_id"
      ],
      "title": "DIRAC Metadata Model",
      "type": "object"
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "description": "Complete schema for DIRAC CWL metadata including all registered plugins",
  "properties": {
    "description": {
      "allOf": [
        {
          "$ref": "#/$defs/TaskDescriptor"
        }
      ],
      "description": "Task description and execution parameters",
      "type": "object"
    },
    "metadata": {
      "allOf": [
        {
          "$ref": "#/$defs/MetadataDescriptor"
        }
      ],
      "description": "Metadata descriptor for the task",
      "type": "object"
    }
  },
  "title": "DIRAC Metadata Schema",
  "type": "object"
}
